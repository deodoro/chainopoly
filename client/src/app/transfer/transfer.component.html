<app-userheader></app-userheader>

<div class="contents">
    <mat-form-field class="fullwidth">
        <input matInput type="text" [(ngModel)]="transfer.account" placeholder="Transfer to">
    </mat-form-field>
    <mat-form-field class="fullwidth">
        <input matInput type="text" [(ngModel)]="transfer.value" placeholder="Value">
    </mat-form-field>
    <section class="mat-typography warning">
        <div>All transfers are final</div>
    </section>
    <div class="button-input">
        <button mat-flat-button disabled="{{isEmpty(transfer.account) || isEmpty(transfer.value) || parseInt(transfer.value) <= 0}}" (click)="doTransfer()" color="primary">
            <mat-icon>done</mat-icon> Do transfer
        </button>
    </div>
    <h1>Transaction History</h1>
    <table mat-table [dataSource]="history">
      <ng-container matColumnDef="date">
        <th mat-header-cell *matHeaderCellDef> Date </th>
        <td mat-cell *matCellDef="let t"> {{ t.date }} </td>
      </ng-container>
      <ng-container matColumnDef="to">
        <th mat-header-cell *matHeaderCellDef> To </th>
        <td mat-cell *matCellDef="let t"> {{ t.dst.account != gameService.getAddress() ? t.dst.alias : '' }} </td>
      </ng-container>
      <ng-container matColumnDef="from">
        <th mat-header-cell *matHeaderCellDef> From </th>
        <td mat-cell *matCellDef="let t"> {{ t.src.account != gameService.getAddress() ? t.src.alias : '' }} </td>
      </ng-container>
      <ng-container matColumnDef="value">
        <th mat-header-cell *matHeaderCellDef> Value </th>
        <td mat-cell *matCellDef="let t"> ${{ t.value }} </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="['date', 'from', 'to', 'value']"></tr>
      <tr mat-row *matRowDef="let p; columns: ['date', 'from', 'to', 'value'];"></tr>
    </table>
</div>
